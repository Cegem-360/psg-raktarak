import{G as d}from"./google-maps-utils-YxLbDfuB.js";class p{constructor(){this.mapsManager=new d}async initialize(e,t,n){try{await this.mapsManager.initializeGoogleMaps(e,"map",()=>{this.updateMapMarkers(t)},n)}catch(i){console.error("Failed to initialize Google Maps:",i)}}async updateMapMarkers(e){if(!this.mapsManager.map||!this.mapsManager.geocoder||(this.mapsManager.clearMarkers(),!e||e.length===0))return;this.mapsManager.updateMapPlaceholder("Címek feldolgozása...");const t=[];for(let s=0;s<e.length;s++){const a=e[s];if(!a.address||a.address.trim()===""){console.warn("Empty address for office:",a.title);continue}const o=s*300,c=new Promise(r=>{setTimeout(async()=>{try{const l=await this.mapsManager.geocodeAddress(a.address);r({office:a,coords:l,success:!0})}catch(l){console.warn(`Failed to geocode address "${a.address}" for office "${a.title}":`,l),r({office:a,coords:null,success:!1})}},o)});t.push(c)}const n=await Promise.all(t),i=[];n.forEach(({office:s,coords:a,success:o})=>{if(o&&a){const c=this.mapsManager.createInfoWindowContent(s),r=this.mapsManager.addMarker(a,s.title,c,!1);r&&i.push(r)}}),this.mapsManager.hideMapPlaceholder(),i.length>0?this.mapsManager.fitMarkersToView():this.mapsManager.showMapMessage("Nem sikerült megjeleníteni a címeket a térképen.")}async refreshMarkers(e){this.mapsManager.mapInitialized&&await this.updateMapMarkers(e)}}window.saleOfficesMapHandler=new p;
